{
    "componentChunkName": "component---src-templates-blog-post-js",
    "path": "/docs/configuring-vm/",
    "result": {"data":{"site":{"siteMetadata":{"title":"Linuxdev Documentation","social":{"disqusShortName":"kennyyeoyounet"}}},"markdownRemark":{"id":"bdeda9f4-e066-5cbb-8d3e-d5bc814c0e13","excerpt":"Configuring the VM You can create .env to customize the VM environment. Bootstrap interactively inputs the required values with some default values. Name This…","html":"<h1 id=\"configuring-the-vm\" style=\"position:relative;\" class=\"title\"><a href=\"#configuring-the-vm\" aria-label=\"configuring the vm permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Configuring the VM</h1>\n<p>You can create .env to customize the VM environment. Bootstrap interactively inputs the required values with some default values.</p>\n<h2 id=\"name\" style=\"position:relative;\" class=\"subtitle\"><a href=\"#name\" aria-label=\"name permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Name</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">NAME=awesome-name</code></pre></div>\n<p>This will rename the machine name in VirtualBox. run <code class=\"language-text\">vagrant reload</code> to apply when updated.</p>\n<h2 id=\"cpus-and-memory\" style=\"position:relative;\" class=\"subtitle\"><a href=\"#cpus-and-memory\" aria-label=\"cpus and memory permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Cpus and memory</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">CPUS=4\nMEMORY=8192</code></pre></div>\n<p>This will adjust cpus and memory, run <code class=\"language-text\">vagrant reload</code> to apply when updated.</p>\n<h2 id=\"expand-disk-size\" style=\"position:relative;\" class=\"subtitle\"><a href=\"#expand-disk-size\" aria-label=\"expand disk size permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Expand disk size</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">EXPAND_DISK_GB=10</code></pre></div>\n<p>It’s using 60GB of disk image but it’s dynamically allocated.\nIt’s is great in most case but when the disk space is expanded, the VM performance will be deteriorated.</p>\n<p>This will expand the disk during bootstrap.\nAnd you will have some slowness on the VM for a while but would not be slow while using the VM afterwhile.</p>\n<p>This should be setup before running bootstrap.\nOr you can retry after removing <code class=\"language-text\">/dummy</code></p>\n<h2 id=\"docker-lib-disk\" style=\"position:relative;\" class=\"subtitle\"><a href=\"#docker-lib-disk\" aria-label=\"docker lib disk permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Docker lib disk</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">DOCKER_DISK_SIZE_GB=45</code></pre></div>\n<p>This creates a dedicated docker disk and mount to <code class=\"language-text\">/var/lib/docker</code></p>\n<p>This uses a <strong>Fixed</strong> size disk image for the performance, so please check the free space before setting this.\nThere is a startup script to check empty disk partition and format to utilise as a docker disk.\nIf you want to change the size, shutdown the VM and remove the image and delete existing, and change this and start the VM. Please note any data in the container <strong>will be gone</strong> with the previous disk image.</p>\n<p>Please note that creating a fixed size image can take a few minutes, but maybe longer in Mac (like an hour). Please be patience.</p>\n<p>This has no default value so it uses the dynamic sized system disk image (maximum 60GB).</p>\n<p>If you had some data left in the system disk docker libs, you can see that by 1. stop docker, 2. unmounting /var/lib/docker, 3. start docker again. You can also delete that after unmounting if you don’t need that any more.</p>\n<h2 id=\"docker-compose-version\" style=\"position:relative;\" class=\"subtitle\"><a href=\"#docker-compose-version\" aria-label=\"docker compose version permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>docker-compose version</h2>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">COMPOSE_VERSION=1.29.2</code></pre></div>\n<p>Downloads docker-compose from <code class=\"language-text\">https://github.com/docker/compose/releases/download/\\${dc_version}/docker-compose-$(uname -s)-$(uname -m)</code></p>\n<h2 id=\"share-host-directories\" style=\"position:relative;\" class=\"subtitle\"><a href=\"#share-host-directories\" aria-label=\"share host directories permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Share host directories</h2>\n<p>You can add shared directory by envionment variables. You will need to <code class=\"language-text\">vagrat reload</code></p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">HOST_PATHS=~/Projects,C:\\ProgramData</code></pre></div>\n<p>If you use <strong>docker</strong> in the host OS and binding volumes, the source volume should be in the HOST_PATHS</p>\n<p>If the path does not exist, it creates a blank directory and shares</p>\n<h2 id=\"setting-vm-environment-variables\" style=\"position:relative;\" class=\"subtitle\"><a href=\"#setting-vm-environment-variables\" aria-label=\"setting vm environment variables permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting VM environment variables</h2>\n<p>If you want to set VM environment variables by the host .env file, use <code class=\"language-text\">__VM__</code> prefix</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">__VM__VERSION=1.2.3</code></pre></div>\n<p>Will set</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">VERSION=1.2.3</code></pre></div>\n<p>in the VM</p>\n<h2 id=\"setting-vm-hosts-entries\" style=\"position:relative;\" class=\"subtitle\"><a href=\"#setting-vm-hosts-entries\" aria-label=\"setting vm hosts entries permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Setting VM hosts entries</h2>\n<p>If you want to add some hosts entry from the host <code class=\"language-text\">.env</code> file, use <code class=\"language-text\">__VMHOSTS__</code> prefix</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">__VMHOSTS__127_0_0_1=somehost</code></pre></div>\n<p>Note that underscores (<code class=\"language-text\">_</code>) will be replaced to <code class=\"language-text\">.</code>.</p>\n<p>Will addd</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">127.0.0.1 somehost</code></pre></div>\n<p>to <code class=\"language-text\">/etc/hosts</code> in the VM</p>\n<p>If you need multiple enrties with the same IP address, you will need some suffix to distinguish enrties</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">__VMHOSTS__127_0_0_1=somehost\n__VMHOSTS__127_0_0_1_a=anotherhost\n__VMHOSTS__127_0_0_1_t=theotherhost</code></pre></div>\n<p>Anything after 4th underscore is ignored</p>","fields":{"slug":"/docs/configuring-vm/","language":""},"frontmatter":{"title":"Configuring VM","date":"October 15, 2021","description":null}},"previous":{"fields":{"slug":"/ko/docs/tips/"},"frontmatter":{"title":"Tips"}},"next":{"fields":{"slug":"/docs/trouble-shooting-and-advanced-usages/"},"frontmatter":{"title":"Trouble shooting and advanced usages"}}},"pageContext":{"id":"bdeda9f4-e066-5cbb-8d3e-d5bc814c0e13","previousPostId":"16173aa3-0137-5eaa-93c4-254d42a584b3","nextPostId":"3983e6bf-1b00-5cf5-ae9e-62d291660e87","language":"en","i18n":{"language":"en","languages":["en","ko","ja"],"defaultLanguage":"en","generateDefaultLanguagePage":false,"routed":false,"originalPath":"/docs/configuring-vm/","path":"/docs/configuring-vm/"}}},
    "staticQueryHashes": ["2355076697","3347749741"]}